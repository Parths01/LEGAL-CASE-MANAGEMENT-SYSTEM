<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cases - Smart Legal CMS</title>
    <link rel="stylesheet" href="assets/css/main.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #0b1c2d;
            --secondary-color: #1a3a52;
            --accent-color: #2196f3;
            --text-dark: #333;
            --text-light: #666;
            --bg-light: #f8f9fa;
            --success-color: #16a34a;
            --danger-color: #dc3545;
            --warning-color: #f59e0b;
            --info-color: #2563eb;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color: var(--text-dark); }
        .dashboard-container { display: flex; flex-direction: column; min-height: 100vh; }
        .main-content { flex: 1; padding: 40px 20px 60px; background: var(--bg-light); max-width: 1400px; margin: 0 auto; width: 100%; }

        .header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        .logo-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .logo-icon { font-size: 2.5rem; color: #ffd700; }
        .firm-name h1 { font-size: 1.5rem; margin: 0; font-weight: 700; }
        .firm-name p { font-size: 0.85rem; margin: 0; opacity: 0.9; }
        .nav-menu {
            display: flex;
            gap: 25px;
            list-style: none;
            align-items: center;
        }
        .nav-menu a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        .nav-menu a:hover { color: #ffd700; }
        .logout-btn {
            background: #dc3545;
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
            font-weight: 600;
            transition: transform 0.3s;
            border: none;
            cursor: pointer;
        }
        .logout-btn:hover { transform: scale(1.05); background: #c82333; }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            gap: 20px;
            flex-wrap: wrap;
        }
        .page-header h1 { color: var(--primary-color); font-size: 2rem; margin: 0; }
        .page-header p { color: var(--text-light); margin: 6px 0 0; }

        .btn { padding: 10px 20px; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; transition: 0.3s; text-decoration: none; display: inline-flex; align-items: center; gap: 8px; }
        .btn-primary { background: var(--accent-color); color: white; }
        .btn-primary:hover { background: #1976d2; }
        .btn-outline { background: transparent; color: var(--primary-color); border: 1px solid #cbd5e1; }
        .btn-outline:hover { background: #f1f5f9; }
        .btn-sm { padding: 6px 12px; font-size: 0.85rem; }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 16px;
            margin-bottom: 25px;
        }
        .stat-card {
            background: white;
            border-radius: 14px;
            padding: 18px 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border: 1px solid rgba(0,0,0,0.03);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .stat-card .label { color: var(--text-light); font-size: 0.9rem; }
        .stat-card .value { font-size: 1.8rem; font-weight: 700; color: var(--primary-color); }
        .stat-card .icon {
            width: 46px;
            height: 46px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            background: rgba(33, 150, 243, 0.12);
            color: var(--accent-color);
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border: 1px solid rgba(0,0,0,0.03);
        }

        .filters {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 12px;
            margin-bottom: 18px;
        }
        .filters input,
        .filters select {
            padding: 10px 12px;
            border: 1px solid #cbd5e1;
            border-radius: 8px;
            font-size: 0.95rem;
            width: 100%;
        }

        .table { width: 100%; border-collapse: collapse; font-size: 0.93rem; }
        .table thead { background: #f3f4f6; }
        .table th {
            padding: 12px 15px;
            text-align: left;
            font-weight: 600;
            color: var(--primary-color);
            border-bottom: 2px solid #e5e7eb;
            white-space: nowrap;
        }
        .table td {
            padding: 12px 15px;
            border-bottom: 1px solid #e5e7eb;
            vertical-align: middle;
        }
        .table tbody tr:hover { background: #f9fafb; }

        .status-badge, .priority-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.82rem;
            font-weight: 600;
            display: inline-block;
            white-space: nowrap;
        }
        .status-active { background: #dcfce7; color: #166534; }
        .status-pending { background: #fef3c7; color: #92400e; }
        .status-closed { background: #e5e7eb; color: #374151; }
        .status-escalated { background: #fee2e2; color: #991b1b; }

        .priority-high { background: #fee2e2; color: #991b1b; }
        .priority-medium { background: #fef3c7; color: #92400e; }
        .priority-low { background: #dbeafe; color: #1e40af; }

        .table-actions { display: flex; gap: 8px; }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-light);
        }

        .toast {
            position: fixed;
            top: 80px;
            right: 20px;
            background: white;
            padding: 16px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 9999;
            animation: slideIn 0.3s ease;
            min-width: 300px;
        }
        .toast.success { border-left: 4px solid var(--success-color); }
        .toast.info { border-left: 4px solid var(--info-color); }
        .toast.error { border-left: 4px solid var(--danger-color); }
        @keyframes slideIn {
            from { transform: translateX(400px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @media (max-width: 1100px) {
            .filters { grid-template-columns: 1fr 1fr; }
        }
        @media (max-width: 768px) {
            .nav-menu { flex-direction: column; gap: 12px; }
            .filters { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="logo-section">
                <i class="fas fa-balance-scale logo-icon"></i>
                <div class="firm-name">
                    <h1>Smart Legal CMS</h1>
                    <p>Cases</p>
                </div>
            </div>
            <nav>
                <ul class="nav-menu">
                    <li><a href="clerk-dashboard.html"><i class="fas fa-home"></i> Dashboard</a></li>
                    <li><a href="clerk-cases.html"><i class="fas fa-briefcase"></i> Cases</a></li>
                    <li><a href="#"><i class="fas fa-file-alt"></i> Documents</a></li>
                    <li><a href="#"><i class="fas fa-tasks"></i> Tasks</a></li>
                    <li><span id="userDisplay" style="margin-right: 15px;"></span></li>
                    <li><button class="logout-btn" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</button></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="dashboard-container">
        <div class="main-content">
            <div class="page-header">
                <div>
                    <h1>My Cases</h1>
                    <p>Cases assigned to you as clerk.</p>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-outline" onclick="resetFilters()"><i class="fas fa-rotate"></i> Reset Filters</button>
                </div>
            </div>

            <div class="stats-grid" id="statsGrid">
                <div class="stat-card">
                    <div>
                        <div class="label">My Cases</div>
                        <div class="value" id="totalCases">0</div>
                    </div>
                    <div class="icon"><i class="fas fa-folder-open"></i></div>
                </div>
                <div class="stat-card">
                    <div>
                        <div class="label">Active</div>
                        <div class="value" id="activeCases">0</div>
                    </div>
                    <div class="icon"><i class="fas fa-gavel"></i></div>
                </div>
                <div class="stat-card">
                    <div>
                        <div class="label">Upcoming Hearings</div>
                        <div class="value" id="upcomingHearings">0</div>
                    </div>
                    <div class="icon"><i class="fas fa-calendar-day"></i></div>
                </div>
            </div>

            <div class="card">
                <div class="filters">
                    <input type="text" id="searchInput" placeholder="Search by case ID, title, or advocate" oninput="applyFilters()">
                    <select id="statusFilter" onchange="applyFilters()">
                        <option value="">All Status</option>
                        <option value="Active">Active</option>
                        <option value="Pending">Pending</option>
                        <option value="Closed">Closed</option>
                    </select>
                    <select id="sortFilter" onchange="applyFilters()">
                        <option value="nextHearing">Sort: Next Hearing</option>
                        <option value="advocate">Sort: Advocate</option>
                        <option value="status">Sort: Status</option>
                    </select>
                </div>

                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Case ID</th>
                                <th>Title</th>
                                <th>Advocate</th>
                                <th>Status</th>
                                <th>Next Hearing</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="casesTableBody"></tbody>
                    </table>
                </div>
                <div id="emptyState" class="empty-state" style="display: none;">
                    <i class="fas fa-folder-open" style="font-size: 2rem; margin-bottom: 10px; color: #94a3b8;"></i>
                    <p>No cases match your filters.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Cases assigned to clerk (filtered view)
        const cases = [
            { id: "LC-2026-001", title: "Rao vs. Mehta", advocate: "Adv. S. Verma", status: "Active", nextHearing: "2026-02-12" },
            { id: "LC-2026-003", title: "Skyline Builders Contract", advocate: "Adv. A. Patel", status: "Active", nextHearing: "2026-03-03" },
            { id: "LC-2026-004", title: "Nair Divorce Settlement", advocate: "Adv. M. Joseph", status: "Escalated", nextHearing: "2026-02-10" },
            { id: "LC-2026-005", title: "Verma Property Dispute", advocate: "Adv. T. Roy", status: "Active", nextHearing: "2026-02-22" }
        ];

        const statusRank = { Escalated: 1, Active: 2, Pending: 3, Closed: 4 };

        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleDateString("en-IN", { day: "2-digit", month: "short", year: "numeric" });
        }

        function updateStats(list) {
            const total = list.length;
            const active = list.filter(c => c.status === "Active").length;
            const upcoming = list.filter(c => new Date(c.nextHearing) >= new Date()).length;
            document.getElementById("totalCases").textContent = total;
            document.getElementById("activeCases").textContent = active;
            document.getElementById("upcomingHearings").textContent = upcoming;
        }

        function getBadgeClass(value, type) {
            if (type === "status") {
                if (value === "Active") return "status-badge status-active";
                if (value === "Pending") return "status-badge status-pending";
                if (value === "Escalated") return "status-badge status-escalated";
                return "status-badge status-closed";
            }
            return "";
        }

        function renderTable(list) {
            const tbody = document.getElementById("casesTableBody");
            const emptyState = document.getElementById("emptyState");
            tbody.innerHTML = "";

            if (!list.length) {
                emptyState.style.display = "block";
                return;
            }
            emptyState.style.display = "none";

            list.forEach(item => {
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${item.id}</td>
                    <td>${item.title}</td>
                    <td>${item.advocate}</td>
                    <td><span class="${getBadgeClass(item.status, "status")}">${item.status}</span></td>
                    <td>${formatDate(item.nextHearing)}</td>
                    <td>
                        <div class="table-actions">
                            <button class="btn btn-outline btn-sm" onclick="viewCase('${item.id}')"><i class="fas fa-eye"></i></button>
                            <button class="btn btn-primary btn-sm" onclick="viewCase('${item.id}')"><i class="fas fa-pen"></i></button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function applyFilters() {
            const query = document.getElementById("searchInput").value.toLowerCase();
            const status = document.getElementById("statusFilter").value;
            const sort = document.getElementById("sortFilter").value;

            let filtered = cases.filter(c => {
                const matchesQuery = [c.id, c.title, c.advocate]
                    .some(field => field.toLowerCase().includes(query));
                const matchesStatus = status ? c.status === status : true;
                return matchesQuery && matchesStatus;
            });

            filtered = filtered.sort((a, b) => {
                if (sort === "advocate") return a.advocate.localeCompare(b.advocate);
                if (sort === "status") return statusRank[a.status] - statusRank[b.status];
                return new Date(a.nextHearing) - new Date(b.nextHearing);
            });

            renderTable(filtered);
            updateStats(filtered);
        }

        function resetFilters() {
            document.getElementById("searchInput").value = "";
            document.getElementById("statusFilter").value = "";
            document.getElementById("sortFilter").value = "nextHearing";
            applyFilters();
        }

        function viewCase(caseId) {
            window.location.href = `case-details.html?id=${caseId}&from=clerk-cases`;
        }

        function logout() {
            window.location.href = "login.html";
        }

        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            const icon = type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle';
            toast.innerHTML = `<i class="fas fa-${icon}" style="font-size: 1.2rem; color: var(--${type === 'success' ? 'success' : type === 'error' ? 'danger' : 'info'}-color);\"></i><span>${message}</span>`;
            document.body.appendChild(toast);
            setTimeout(() => {
                toast.style.animation = 'slideIn 0.3s ease reverse';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        applyFilters();
    </script>
</body>
</html>
